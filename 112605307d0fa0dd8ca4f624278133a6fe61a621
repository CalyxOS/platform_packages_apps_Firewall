{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e46ab2ef_82404f91",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000014
      },
      "writtenOn": "2021-06-07T14:55:01Z",
      "side": 1,
      "message": "I feel this is a bug. mPolicyManager.removeUidPolicy(uid, POLICY_ALLOW_METERED_BACKGROUND); is applied outside of the if statement. Which means sets this for the app whether or not blacklisted is true or not. Can\u0027t remember writing that code that way.\n\nMaybe I\u0027m wrong. If so feel free to abandon",
      "revId": "112605307d0fa0dd8ca4f624278133a6fe61a621",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c805a5ba_e37aa5db",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-06-07T15:34:12Z",
      "side": 1,
      "message": "This code comes from https://gitlab.com/CalyxOS/platform_packages_apps_Settings/-/blob/android11-qpr1/src/com/android/settings/datausage/DataSaverBackend.java#L84\n\nFlipping the login might have resulted in this bug, I see what you mean.\n\nOliver, can you check? Need to look at the rest of the flow to see what makes sense.",
      "parentUuid": "e46ab2ef_82404f91",
      "revId": "112605307d0fa0dd8ca4f624278133a6fe61a621",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03c4e261_2f364ecb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-06-08T02:28:57Z",
      "side": 1,
      "message": "Upstream was changed from AOSP because it used to be setUidPolicy which nukes all applied policies and only applies the one being set. Therefore using add or remove made sense. The blacklist and whitelist should not be confused as they are separate things with separate meanings. There are 3 states, an app can be on neither, on one or the other. See my comment in the code for the explanation",
      "parentUuid": "c805a5ba_e37aa5db",
      "revId": "112605307d0fa0dd8ca4f624278133a6fe61a621",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03496575_4962b146",
        "filename": "app/src/main/java/org/calyxos/datura/settings/SettingsManager.java",
        "patchSetId": 1
      },
      "lineNbr": 95,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-06-08T02:28:57Z",
      "side": 1,
      "message": "This is incorrect. This allows background traffic from the UID to unconditionally flow (including on metered networks). Blacklisted variable being false means we want to remove the POLICY_REJECT_METERED_BACKGROUND, not that we want to allowlist it too",
      "range": {
        "startLine": 95,
        "startChar": 11,
        "endLine": 95,
        "endChar": 78
      },
      "revId": "112605307d0fa0dd8ca4f624278133a6fe61a621",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}